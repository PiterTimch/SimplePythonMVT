{% extends "layout.html" %}
{% load static %}

{% block content %}
<h1 class="text-center">Продукти</h1>
<a href="{% url 'products:add_product' %}" 
    class="btn btn-success mb-3">Додати продукт</a>
    
<table class="table">
  <thead>
    <tr>
        <th scope="col">Фото</th>
        <th scope="col">Назва</th>
        <th scope="col">Категорія</th>
        <th class="text-center" scope="col">Slug</th>
        <th scope="col">Ціна</th>
        <th scope="col">Дія</th>
    </tr>
  </thead>
  <tbody>
    {% for product  in products %}
    <tr>
       <td>
          {% with main_image=product.images.all|dictsort:"priority"|first %}
              {% if main_image %}
                  <img width="100px" src="{{ main_image.image.url }}" alt="{{ product.name }}" class="product-img">
              {% else %}
                  <img width="100px" src="{% static 'images/no-image.png' %}" alt="No image" class="product-img">
              {% endif %}
          {% endwith %}
      </td>
      <td>{{ product.name }}</td>
      <td>{{ product.category.name }}</td>
      <td class="text-center">{{ product.slug }}</span></td>
      <td class="price">{{ product.price }} ₴</td>
      <td>
        {% comment %} <a href="{% url 'product:edit_product' product.id %}" class="btn btn-warning me-1">Edit</a>
        <a href="{% url 'product:delete_product' product.id %}" class="btn btn-danger">Delete</a> {% endcomment %}
      </td>
    <tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}